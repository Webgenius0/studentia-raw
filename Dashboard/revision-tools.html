<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Revision Tools - Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet" />

    <style>
        body { background-color: #1C202B; color: white; font-family: sans-serif; }
        /* Active state for Left Column Main Tabs */
        .main-tab-trigger.active { background-image: linear-gradient(to bottom, #6049BC, #D24AC9); }
        /* Active state for Right Column Side Tabs */
        .side-tab-trigger.active { background-image: linear-gradient(to bottom, #7A43A4, #6049BC); }
        /* Active state for Sidebar Submenu Items */
        .sidebar-submenu-item.sidebar-submenu-active .indicator { background-color: #6049BC; border-color: #6049BC; }
        .sidebar-submenu-item.sidebar-submenu-active { color: white; font-weight: 500; }
        .sidebar-submenu-item .indicator { width: 10px; height: 10px; border-radius: 50%; border: 1px solid #E6A0E2; }
        /* Styles for the Quiz Component */
        .quiz-option.selected { background-image: linear-gradient(to right, #a855f7, #6366f1); border-color: transparent; }
    </style>
  <link rel="stylesheet" href="./assets/css/dashboard.css" />
</head>
<body class="bg-[#1C202B] text-white transition-colors duration-300">
  <!-- Google Translate -->
  <div id="google_translate_element"></div>

  <div class="flex">
    <!-- Sidebar (same as dashboard.html) -->
    <div id="sidebar" class="transition-all duration-300 w-[320px] fixed bottom-0 top-0 left-0 z-[2000] lg:ml-0 ml-[-320px]">
      <div class="flex flex-col min-h-screen bg-sidebar">
        <div class="h-[80px] p-[10px] bg-sidebar">
          <img id="logo" src="./assets/images/logo.png" alt="logo" />
        </div>
        <div class="h-[calc(100vh-80px)] flex flex-col font-['Space_Grotesk'] px-8 overflow-y-auto scrollbar-hide">
          <!-- Sidebar links (same as dashboard.html) -->
          <a href="dashboard.html" class="sidebar-link flex items-center gap-1 p-[10px] rounded-[6px] text-[#E6A0E2] transition-all duration-200">
            <img src="./assets/images/icons/dashboard-icon.svg" alt="dashboard-icon" />
            <p class="text-3xl font-bold leading-[132%] tracking-[-0.237px] text-light-dark">Dashboards</p>
          </a>
          <!-- Ai Panel Section -->
          <div class="text-light-dark">
            <h2 class="text-base leading-[132%] tracking-[-0.158px] px-8 py-[10px] font-bold">Ai Panel</h2>
            <div id="sidebar-menu" class="flex flex-col gap-3 px-4">
              <div>
                <a href="writing-tools.html" class="sidebar-link flex items-center justify-between rounded-[6px] px-4 py-[10px]" data-route="writing-tools">
                  <div class="flex items-center gap-2">
                    <img src="./assets/images/icons/writing-tools-icon.svg" alt="icon" />
                    <p class="text-base font-medium">Writing tools</p>
                  </div>
                  <img src="./assets/images/icons/lower-arrow-icon.svg" alt="icon" />
                </a>
              </div>
               <!-- revision tools -->
                <div>
                  <a
                    href="./revision-tools.html"
                    id="sidebar-revision-tools-trigger"
                    class="sidebar-link flex items-center justify-between rounded-[6px] px-4 py-[10px] bg-[#6049BC]/20"
                    data-route="revision-tools">
                    <div class="flex items-center gap-2">
                      <img src="./assets/images/icons/writing-tools-icon.svg"
                        alt="icon" />
                      <p class="text-base font-medium">Revision tools</p>
                    </div>
                    <img
                      src="./assets/images/icons/lower-arrow-icon.svg"
                      alt="icon"
                      class="transition-transform duration-300" />
                  </a>
                  <div
                    id="revision-tools-submenu"
                    class="hidden mt-2 flex flex-col gap-1 pl-10">
                    <a
                      href="#"
                      data-sidebar-tab="ai-pdf-scan"
                      class="sidebar-submenu-item sidebar-submenu-active flex items-center gap-3 p-2 rounded-md">
                      <span class="indicator"></span>
                      <span>AI PDF Scan</span>
                    </a>
                    <a
                      href="#"
                      data-sidebar-tab="ai-quiz"
                      class="sidebar-submenu-item flex items-center gap-3 p-2 rounded-md">
                      <span class="indicator"></span>
                      <span>AI Quiz</span>
                    </a>
                    <a
                      href="#"
                      data-sidebar-tab="ai-podcast"
                      class="sidebar-submenu-item flex items-center gap-3 p-2 rounded-md">
                      <span class="indicator"></span>
                      <span>AI Podcast</span>
                    </a>
                  </div>
                </div>
              <div>
                <a href="documents.html" class="sidebar-link flex items-center justify-between rounded-[6px] px-4 py-[10px]" data-route="documents">
                  <div class="flex items-center gap-2">
                    <img src="./assets/images/icons/documents-icon.svg" alt="icon" />
                    <p class="text-base font-medium">Documents</p>
                  </div>
                  <img src="./assets/images/icons/lower-arrow-icon.svg" alt="icon" />
                </a>
              </div>
              <a href="subscription.html" class="sidebar-link flex items-center rounded-[6px] px-4 py-[10px]">
                <img src="./assets/images/icons/subscription-panel-icon.svg" alt="icon" />
                <p class="text-base font-medium">Subscription Panel</p>
              </a>
              <a href="account.html" class="sidebar-link flex items-center rounded-[6px] px-4 py-[10px]">
                <img src="./assets/images/icons/account-icon.svg" alt="icon" />
                <p class="text-base font-medium">Account</p>
              </a>
              <a href="admin.html" class="sidebar-link flex items-center rounded-[6px] px-4 py-[10px]">
                <img src="./assets/images/icons/admin-panel-icon.svg" alt="icon" />
                <p class="text-base font-medium">Admin Panel</p>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="w-full h-full lg:w-[calc(100dvw-320px)] ml-0 lg:ml-[320px] flex flex-col transition-all duration-300">
      <div class="h-[80px] sticky top-0 z-[450] w-full">
        <nav class="h-full flex items-center justify-between px-4 sm:px-6 py-2 bg-sidebar text-light-dark">
          <div class="flex items-center gap-4">
            <button id="sidebar-toggle" class="lg:hidden p-2 rounded-full border border-purple-600 text-purple-600 hover:bg-purple-600 hover:text-white transition-colors duration-200">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
              </svg>
            </button>
            <div class="flex-1 flex items-center gap-3 w-full placeholder-white focus:outline-none max-w-md rounded-[19px] border dark:border-[rgba(207,207,207,0.11)] light:border-[#E6A0E2] bg-card-dark bg-card-light px-4 py-1 cursor-pointer">
              <img id="search-icon" src="./assets/images/icons/search-icon.svg" alt="search-icon" />
              <input type="text" placeholder="Search" class="w-full text-sm dark:text-white light:text-[#1C202B] border-none outline-none focus-visible:ring-0 bg-transparent" />
            </div>
          </div>
          
          <div class="flex items-center gap-4 sm:gap-6 ml-4">
              <!-- Language Switcher -->
          <div class="relative inline-block text-left">
            <button
              id="langBtn"
              class="flex items-center gap-2 px-3 py-2 border border-purple-600 rounded-lg text-sm hover:bg-purple-600 hover:text-white dark:text-white transition"
            >
              <img
                id="langIcon"
                src="https://flagcdn.com/w20/gb.png"
                alt="English Flag"
                class="w-5 h-5 rounded-sm"
              />
              <span id="langName">English</span>
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                />
              </svg>
            </button>

            <!-- Dropdown -->
            <div
              id="langMenu"
              class="hidden absolute mt-2 w-40 bg-white dark:bg-[#1e1b4b] text-gray-800 dark:text-white rounded-lg shadow-lg"
            >
              <button
                onclick="setLanguage('en', 'https://flagcdn.com/w20/gb.png', 'English')"
                class="flex items-center gap-2 px-4 py-2 w-full hover:bg-gray-100 dark:hover:bg-[#2a2550]"
              >
                <img
                  src="https://flagcdn.com/w20/gb.png"
                  class="w-5 h-5 rounded-sm"
                  alt="English"
                />
                English
              </button>
              <button
                onclick="setLanguage('fr', 'https://flagcdn.com/w20/fr.png', 'Français')"
                class="flex items-center gap-2 px-4 py-2 w-full hover:bg-gray-100 dark:hover:bg-[#2a2550]"
              >
                <img
                  src="https://flagcdn.com/w20/fr.png"
                  class="w-5 h-5 rounded-sm"
                  alt="Français"
                />
                Français
              </button>
            </div>
          </div>

            <button id="theme-toggle" class="p-2 rounded-[12px] border border-[#6049bc] text-light-dark hover:bg-[#6049bc] hover:text-white transition-all duration-300">
              <svg id="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden">
                <circle cx="12" cy="12" r="4" /><path d="M12 2v2M12 20v2m-7.07-15.07l1.41 1.41m10.61 10.61l1.41 1.41M2 12h2m16 0h2m-15.07 6.07l1.41-1.41m10.61-10.61l1.41-1.41" />
              </svg>
              <svg id="theme-icon-moon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />
              </svg>
            </button>

            <div class="relative">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 dark:text-white light:text-[#1C202B]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0a3 3 0 11-6 0m6 0v2a3 3 0 00-6 0v-2" />
              </svg>
              <span id="notification-count" class="absolute -top-2 -right-2 bg-red-600 text-xs w-5 h-5 flex items-center justify-center rounded-full">6</span>
            </div>

            <div class="flex items-center gap-2 cursor-pointer">
              <img src="./assets/images/profile.png" alt="profile-icon" class="rounded-full w-12 h-12" />
              <div class="text-sm text-left hidden sm:block">
                <div class="font-medium leading-none text-light-dark">Jane Cooper</div>
                <div class="text-xs dark:text-gray-400 light:text-gray-600">Admin</div>
              </div>
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 hidden sm:block dark:text-white light:text-[#1C202B]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
              </svg>
            </div>
          </div>
        </nav>
      </div>
     <div class="flex flex-col lg:flex-row gap-5 min-h-[calc(100svh-80px)] w-full p-4">

        <div class="w-full lg:w-1/2 flex flex-col gap-4">
            <div id="main-tabs-list" class="bg-[#10122e] px-6 py-9 border border-[#D24AC966] rounded-[16px] flex flex-wrap gap-2">
                <button data-tab="pdf-scan" class="main-tab-trigger active cursor-pointer px-5 py-6 border border-[#D24AC966] rounded-[12px] flex items-center gap-2">
                    <img src="./assets/images/icons/pdf-scan-icon.svg" alt="PDF Scan Icon" />
                    <p class="text-xl font-medium text-[#F9F9F9]">AI PDF Scan</p>
                </button>
                <button data-tab="ai-quiz" class="main-tab-trigger cursor-pointer px-5 py-6 border border-[#D24AC966] rounded-[12px] flex items-center gap-2">
                    <img src="./assets/images/icons/quiz-icon.svg" alt="AI Quiz Icon" />
                    <p class="text-xl font-medium text-[#F9F9F9]">AI Quiz</p>
                </button>
                <button data-tab="podcast" class="main-tab-trigger cursor-pointer px-5 py-6 border border-[#D24AC966] rounded-[12px] flex items-center gap-2">
                    <img src="./assets/images/icons/podcast-icon.svg" alt="Podcast Icon" />
                    <p class="text-xl font-medium text-[#F9F9F9]">AI Podcast</p>
                </button>
            </div>

            <div id="main-tabs-content" class="flex-grow">
                <div id="pdf-scan-content" class="main-tab-content rounded-[16px] bg-[#1C202B] shadow-[2px_11px_40px_0px_rgba(114,75,150,0.32)] h-full">
                    <div id="pdf-reader-component" class="p-4 sm:p-6">
                        <div id="pdf-upload-view" class="bg-[#1b1b2f] text-white p-6 rounded-xl shadow-lg border border-purple-500">
                            <h2 class="text-lg font-semibold mb-1">Upload Document</h2>
                            <p class="text-sm text-gray-400 mb-4">Please upload a PDF file under 25 MB.</p>
                            <div class="border-2 border-dashed border-purple-600 rounded-xl p-6 flex flex-col items-center justify-center text-center mb-4 bg-gradient-to-r from-[#2d2d44] to-[#3f3f5e]">
                                <svg class="w-6 h-6 mb-2 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242M12 12v9m-4 4 4-4 4 4"/></svg>
                                <p class="text-sm">Drop file or browse</p>
                                <p class="text-xs text-gray-400">Format: .pdf & Max file size: 25 MB</p>
                                <label class="mt-3">
                                    <input type="file" accept="application/pdf" id="pdf-file-input" class="hidden" />
                                    <button id="browse-files-btn" class="border border-purple-400 text-purple-400 hover:bg-purple-800 px-4 py-2 rounded-md text-sm">Browse Files</button>
                                </label>
                            </div>
                        </div>
                        <div id="pdf-viewer-view" class="hidden">
                            <div class="relative bg-black border border-gray-700 rounded-lg overflow-hidden">
                                <div class="flex justify-between items-center p-4 bg-[#1b1b2f] text-white border-b border-gray-700">
                                    <div class="flex items-center gap-2">
                                        <button id="zoom-out-btn" class="p-2 border border-gray-600 rounded-md hover:bg-gray-700"><svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg></button>
                                        <span id="zoom-display" class="text-sm text-gray-300">Zoom: 100%</span>
                                        <button id="zoom-in-btn" class="p-2 border border-gray-600 rounded-md hover:bg-gray-700"><svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg></button>
                                    </div>
                                    <div id="pdf-filename" class="text-sm text-gray-400 italic truncate max-w-xs"></div>
                                    <button id="remove-pdf-btn" class="flex items-center gap-1 bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-md text-sm">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                        Remove
                                    </button>
                                </div>
                                <div class="w-full overflow-auto bg-gray-800">
                                    <iframe id="pdf-iframe" title="PDF Viewer" width="100%" height="600px" class="transition-transform duration-300" style="transform-origin: top center"></iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="ai-quiz-content" class="main-tab-content hidden rounded-[16px] bg-[#1C202B] shadow-[2px_11px_40px_0px_rgba(114,75,150,0.32)] h-full p-6">
                    <div class="flex flex-col items-center justify-center h-full text-center">
                        <img src="./assets/images/icons/quiz-icon.svg" alt="AI Quiz Icon" class="w-16 h-16 mb-4" />
                        <h2 class="text-2xl font-bold">AI Quiz</h2>
                        <p class="text-gray-400">AI Quiz content will be displayed here.</p>
                    </div>
                </div>

                <div id="podcast-content" class="main-tab-content hidden rounded-[16px] bg-[#1C202B] shadow-[2px_11px_40px_0px_rgba(114,75,150,0.32)] h-full p-6">
                     <div class="flex flex-col items-center justify-center h-full text-center">
                        <img src="./assets/images/icons/podcast-icon.svg" alt="AI Podcast Icon" class="w-16 h-16 mb-4" />
                        <h2 class="text-2xl font-bold">AI Podcast</h2>
                        <p class="text-gray-400">AI Podcast content will be displayed here.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="w-full lg:w-1/2 flex flex-col gap-5 h-full">
            <div id="side-tabs-list" class="flex flex-wrap gap-6 rounded-[20px] bg-[#1C202B] shadow-[2px_11px_40px_0px_rgba(114,75,150,0.32)] py-5 px-6 w-full">
                <button data-tab="chat" class="side-tab-trigger active cursor-pointer px-7 py-[14px] flex items-center gap-2 rounded-[20px] border border-[#7A43A4]">
                    <img src="./assets/images/icons/chat.svg" alt="Chat Icon" />
                    <p class="text-[#F9F9F9] text-base font-medium">Chat</p>
                </button>
                <button data-tab="note-taking" class="side-tab-trigger cursor-pointer px-7 py-[14px] flex items-center gap-2 rounded-[20px] border border-[#7A43A4]">
                    <img src="./assets/images/icons/note-taking.svg" alt="Note Taking Icon" />
                    <p class="text-[#F9F9F9] text-base font-medium">Note-taking</p>
                </button>
                <button data-tab="quiz-yourself" class="side-tab-trigger cursor-pointer px-7 py-[14px] flex items-center gap-2 rounded-[20px] border border-[#7A43A4]">
                    <img src="./assets/images/icons/quiz-yourself.svg" alt="Quiz Yourself Icon" />
                    <p class="text-[#F9F9F9] text-base font-medium">Quiz Yourself</p>
                </button>
                <button data-tab="summary" class="side-tab-trigger cursor-pointer px-7 py-[14px] flex items-center gap-2 rounded-[20px] border border-[#7A43A4]">
                    <img src="./assets/images/icons/summary.svg" alt="Summary Icon" />
                    <p class="text-[#F9F9F9] text-base font-medium">Summary</p>
                </button>
                <button data-tab="flashcards" class="side-tab-trigger cursor-pointer px-7 py-[14px] flex items-center gap-2 rounded-[20px] border border-[#7A43A4]">
                    <img src="./assets/images/icons/flashcards.svg" alt="Flashcards Icon" />
                    <p class="text-[#F9F9F9] text-base font-medium">Flashcards</p>
                </button>
            </div>
            
            <div id="side-tabs-content" class="flex-grow">
                <div id="chat-content" class="side-tab-content rounded-[16px] bg-[#1C202B] shadow-[2px_11px_40px_0px_rgba(114,75,150,0.32)] h-full p-6">
                    <div id="chat-start-view" class="flex flex-col items-center justify-center text-center h-full">
                         <img src="./assets/images/icons/chat.svg" alt="Chat Icon" class="w-16 h-16 mb-4" />
                        <h2 class="text-2xl font-bold mb-2">Start a Chat</h2>
                        <p class="text-gray-400 max-w-xs mb-6">Chat with your document to get answers, summaries, and more.</p>
                        <button id="start-chat-button" class="bg-gradient-to-b from-[#7A43A4] to-[#6049BC] text-white font-bold py-2 px-6 rounded-lg">
                            Start Chat
                        </button>
                    </div>
                    <div id="chat-active-view" class="hidden flex flex-col h-full">
                        <div class="flex-grow border border-gray-700 rounded-lg p-4 mb-4">
                            <p class="text-gray-400">Chat interface will appear here...</p>
                        </div>
                        <div class="flex gap-2">
                            <input type="text" placeholder="Ask a question..." class="w-full bg-[#10122e] border border-gray-600 rounded-lg p-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" />
                            <button class="bg-purple-600 text-white px-4 py-2 rounded-lg font-semibold">Send</button>
                        </div>
                    </div>
                </div>

                <div id="note-taking-content" class="side-tab-content hidden rounded-[16px] bg-[#1C202B] shadow-[2px_11px_40px_0px_rgba(114,75,150,0.32)] h-full p-6">
                     <div class="flex flex-col h-full">
                        <h2 class="text-2xl font-bold mb-4">Note Taking</h2>
                        <textarea class="w-full flex-grow bg-[#10122e] border border-gray-600 rounded-lg p-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Start writing your notes..."></textarea>
                    </div>
                </div>

                <div id="quiz-yourself-content" class="side-tab-content hidden rounded-[16px] bg-[#1C202B] shadow-[2px_11px_40px_0px_rgba(114,75,150,0.32)] h-full p-6">
                    <div id="quiz-component">
                        </div>
                </div>

                <div id="summary-content" class="side-tab-content hidden rounded-[16px] bg-[#1C202B] shadow-[2px_11px_40px_0px_rgba(114,75,150,0.32)] h-full p-6">
                    <div class="flex flex-col h-full">
                        <h2 class="text-2xl font-bold mb-4">Summary</h2>
                        <div class="w-full flex-grow bg-[#10122e] border border-gray-600 rounded-lg p-3 text-gray-400">
                            <p>Your document summary will appear here...</p>
                        </div>
                    </div>
                </div>

                <div id="flashcards-content" class="side-tab-content hidden rounded-[16px] bg-[#1C202B] shadow-[2px_11px_40px_0px_rgba(114,75,150,0.32)] h-full p-6">
                    <div class="flex flex-col items-center justify-center h-full text-center">
                        <h2 class="text-2xl font-bold mb-4">Flashcards</h2>
                        <div class="w-64 h-40 bg-gradient-to-br from-purple-600 to-indigo-700 rounded-xl flex items-center justify-center p-4">
                            <p class="text-lg font-semibold">Click to Flip</p>
                        </div>
                         <p class="text-gray-400 mt-4">Flashcard content will be displayed here.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="./assets/js/dashboard.js"></script>
  <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        
        // --- Sidebar Dropdown & Main Tab Sync Logic ---
        const revisionToolsTrigger = document.getElementById('sidebar-revision-tools-trigger');
        const revisionToolsSubmenu = document.getElementById('revision-tools-submenu');
        
        // Function to activate a main tab and sync the sidebar
        const activateMainTab = (tabId) => {
            if (!tabId) return;
            // Activate tab button in content
            document.querySelectorAll('.main-tab-trigger').forEach(t => t.classList.toggle('active', t.dataset.tab === tabId));
            // Show content panel
            document.querySelectorAll('.main-tab-content').forEach(c => c.classList.toggle('hidden', c.id !== `${tabId}-content`));
            // Sync sidebar active state
            document.querySelectorAll('#revision-tools-submenu .sidebar-submenu-item').forEach(item => {
                item.classList.toggle('sidebar-submenu-active', item.dataset.sidebarTab === tabId);
            });
        };
        
        // Event: Toggle sidebar dropdown
        revisionToolsTrigger?.addEventListener('click', (e) => {
            e.preventDefault();
            revisionToolsSubmenu.classList.toggle('hidden');
            revisionToolsTrigger.querySelector('img:last-child').classList.toggle('rotate-180');
        });
        
        // Event: Click on sidebar submenu item
        revisionToolsSubmenu?.addEventListener('click', (e) => {
            const subItem = e.target.closest('[data-sidebar-tab]');
            if (subItem) {
                e.preventDefault();
                activateMainTab(subItem.dataset.sidebarTab);
            }
        });

        // Event: Click on main tab button in content
        document.getElementById('main-tabs-list')?.addEventListener('click', (e) => {
            const trigger = e.target.closest('.main-tab-trigger');
            if (trigger) {
                activateMainTab(trigger.dataset.tab);
            }
        });

        // --- Side Tabs Logic ---
        const sideTabsList = document.getElementById('side-tabs-list');
        sideTabsList?.addEventListener('click', (e) => {
            const trigger = e.target.closest('.side-tab-trigger');
            if (!trigger) return;
            sideTabsList.querySelectorAll('.side-tab-trigger').forEach(t => t.classList.remove('active'));
            trigger.classList.add('active');
            const tabId = trigger.dataset.tab;
            document.querySelectorAll('.side-tab-content').forEach(c => {
                c.classList.toggle('hidden', c.id !== `${tabId}-content`);
            });
        });

        // ===================================
        // --- CHAT VIEW SWITCHER LOGIC ---
        // ===================================
        document.getElementById('start-chat-button')?.addEventListener('click', () => {
            document.getElementById('chat-start-view').classList.add('hidden');
            document.getElementById('chat-active-view').classList.remove('hidden');
        });

        // ===================================
        // --- PDF READER LOGIC ---
        // ===================================
        const pdfFileInput = document.getElementById("pdf-file-input");
        const browseFilesBtn = document.getElementById("browse-files-btn");
        const uploadView = document.getElementById("pdf-upload-view");
        const viewerView = document.getElementById("pdf-viewer-view");
        const pdfIframe = document.getElementById("pdf-iframe");
        let pdfFileUrl = null;
        let pdfZoom = 1;

        browseFilesBtn?.addEventListener("click", () => pdfFileInput.click());
        pdfFileInput?.addEventListener("change", (e) => {
            const uploadedFile = e.target.files[0];
            if (uploadedFile?.type === "application/pdf" && uploadedFile.size < 25 * 1024 * 1024) {
                if (pdfFileUrl) URL.revokeObjectURL(pdfFileUrl);
                pdfFileUrl = URL.createObjectURL(uploadedFile);
                pdfIframe.src = pdfFileUrl;
                document.getElementById("pdf-filename").textContent = uploadedFile.name;
                uploadView.classList.add("hidden");
                viewerView.classList.remove("hidden");
            } else { alert("Only PDF files under 25MB are allowed."); pdfFileInput.value = ""; }
        });
        const updateZoom = () => {
            pdfIframe.style.transform = `scale(${pdfZoom})`;
            document.getElementById("zoom-display").textContent = `Zoom: ${(pdfZoom * 100).toFixed(0)}%`;
        };
        document.getElementById("zoom-in-btn")?.addEventListener("click", () => { pdfZoom = Math.min(pdfZoom + 0.2, 2); updateZoom(); });
        document.getElementById("zoom-out-btn")?.addEventListener("click", () => { pdfZoom = Math.max(pdfZoom - 0.2, 0.5); updateZoom(); });
        document.getElementById("remove-pdf-btn")?.addEventListener("click", () => {
            if (pdfFileUrl) URL.revokeObjectURL(pdfFileUrl);
            pdfFileUrl = null; pdfZoom = 1; pdfFileInput.value = ""; pdfIframe.src = ""; updateZoom();
            uploadView.classList.remove("hidden"); viewerView.classList.add("hidden");
        });

        // ===================================
        // --- QUIZ GENERATOR LOGIC ---
        // ===================================
        let quizCurrentIndex = 0;
        let quizAnswers = {}; 
        
        const attachQuizListeners = () => {
            document.getElementById('generate-quiz-btn')?.addEventListener('click', startQuiz);
            document.getElementById('quiz-prev-btn')?.addEventListener('click', goToPreviousQuestion);
            document.getElementById('quiz-next-btn')?.addEventListener('click', goToNextQuestion);
            document.getElementById('restart-quiz-btn')?.addEventListener('click', restartQuiz);
            document.querySelectorAll('#quiz-component .quiz-option').forEach(btn => btn.addEventListener('click', handleOptionSelect));
        }
        
        const showQuizScreen = (screenName) => {
            ['quiz-form-screen', 'quiz-loading-screen', 'quiz-active-screen', 'quiz-result-screen'].forEach(id => {
                document.getElementById(id)?.classList.add('hidden');
            });
            document.getElementById(screenName)?.classList.remove('hidden');
        };

        const startQuiz = () => {
            showQuizScreen('quiz-loading-screen');
            setTimeout(() => {
                showQuizScreen('quiz-active-screen');
                showQuestion(0);
            }, 1500);
        };

        const showQuestion = (index) => {
            quizCurrentIndex = index;
            const questions = document.querySelectorAll('#quiz-component .quiz-question-container');
            const totalQuestions = questions.length;
            if (questions.length === 0) return;

            questions.forEach((q, i) => q.classList.toggle('hidden', i !== index));

            const stepper = document.getElementById('quiz-stepper');
            let stepperHTML = Array.from({ length: totalQuestions }, (_, i) => `<div class="h-2 flex-1 rounded-full ${i <= index ? 'bg-purple-600' : 'bg-gray-700'}"></div>`).join('');
            stepper.innerHTML = stepperHTML;
            
            const currentQuestionEl = questions[index];
            currentQuestionEl.querySelectorAll('.quiz-option').forEach(btn => btn.classList.remove('selected'));
            if (quizAnswers[index]) {
                currentQuestionEl.querySelector(`[data-option="${quizAnswers[index]}"]`)?.classList.add('selected');
            }

            document.getElementById('quiz-prev-btn').disabled = index === 0;
            document.getElementById('quiz-next-btn').textContent = index === totalQuestions - 1 ? 'Finish' : 'Next';
        };

        const goToNextQuestion = () => {
            const totalQuestions = document.querySelectorAll('#quiz-component .quiz-question-container').length;
            if (quizCurrentIndex < totalQuestions - 1) showQuestion(quizCurrentIndex + 1); else showResult();
        };

        const goToPreviousQuestion = () => { if (quizCurrentIndex > 0) showQuestion(quizCurrentIndex - 1); };

        const handleOptionSelect = (e) => {
            const selectedOption = e.target.dataset.option;
            quizAnswers[quizCurrentIndex] = selectedOption;
            const parentQuestion = e.target.closest('.quiz-question-container');
            parentQuestion.querySelectorAll('.quiz-option').forEach(btn => btn.classList.remove('selected'));
            e.target.classList.add('selected');
        };

        const showResult = () => {
            const questions = document.querySelectorAll('#quiz-component .quiz-question-container');
            let score = 0;
            questions.forEach((q, index) => { if (q.dataset.correctAnswer === quizAnswers[index]) score++; });
            document.getElementById('quiz-score-display').textContent = `${score} / ${questions.length}`;
            showQuizScreen('quiz-result-screen');
        };
        
        const restartQuiz = () => {
            quizCurrentIndex = 0;
            quizAnswers = {};
            showQuizScreen('quiz-form-screen');
        };

        // Attach listeners to the quiz HTML that's already on the page
        attachQuizListeners();
    });
    </script>
</body>
</html>
